# üìä –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞ Google

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–π—Ç–∏–Ω–≥ **4,8 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (256)** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞ Google –±–ª–∞–≥–æ–¥–∞—Ä—è **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º Schema.org** —Ñ–æ—Ä–º–∞—Ç–∞ JSON-LD, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ HTML-—Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

Google —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Ö –≤ –≤–∏–¥–µ **Rich Snippets** (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤) –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–µ.

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. **Google Search Console —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç structured data**
- –ü—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–∞–π—Ç–∞ Google —á–∏—Ç–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ `<script type="application/ld+json">` —Ç–µ–≥–∏
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —Ä–µ–π—Ç–∏–Ω–≥–∞—Ö, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É Schema.org
- –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ (stars, price, rating count)

### 2. **Schema.org —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**
–í —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ structured data:
- `WebSite` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∞–π—Ç–µ + SearchAction
- `Organization` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ª–æ–≥–æ—Ç–∏–ø
- **`WebApplication`** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º ‚≠ê (–ö–õ–Æ–ß–ï–í–û–ô –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- `SiteNavigationElement` ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è sitelinks
- `ItemList` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤
- `FAQPage` ‚Äî —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

---

## üíª –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª: `client/index.html`

#### üî• –ì–ª–∞–≤–Ω—ã–π –±–ª–æ–∫: WebApplication —Å aggregateRating

```html
<!-- Structured Data: WebApplication -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Cocktailo Maker",
  "description": "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ–Ω–ª–∞–π–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–∫—Ç–µ–π–ª–µ–π —Å –±–æ–ª–µ–µ —á–µ–º 800 –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏",
  "url": "https://cocktailomaker.ru",
  "applicationCategory": "LifestyleApplication",
  "operatingSystem": "All",
  "browserRequirements": "Requires JavaScript",
  "softwareVersion": "1.0",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "RUB"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "256",
    "bestRating": "5",
    "worstRating": "1"
  },
  "featureList": [
    "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–∫—Ç–µ–π–ª–µ–π",
    "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–µ—Ü–µ–ø—Ç–æ–≤",
    "–ö–∞—Ç–∞–ª–æ–≥ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤",
    "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫—Ä–µ–ø–æ—Å—Ç–∏",
    "–ö—É—Ä—Å—ã –º–∏–∫—Å–æ–ª–æ–≥–∏–∏"
  ]
}
</script>
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
- `@type: "WebApplication"` ‚Äî —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- `aggregateRating` ‚Äî –ö–õ–Æ–ß–ï–í–û–ï –ø–æ–ª–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞
  - `ratingValue: "4.8"` ‚Äî —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
  - `ratingCount: "256"` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
  - `bestRating: "5"` ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
  - `worstRating: "1"` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
- `offers.price: "0"` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ"
- `applicationCategory: "LifestyleApplication"` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–°—Ç–∏–ª—å –∂–∏–∑–Ω–∏"

---

### üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ HTML

```html
<!DOCTYPE html>
<html lang="ru" translate="no">
  <head>
    <meta charset="UTF-8" />
    
    <!-- Meta —Ç–µ–≥–∏ SEO -->
    <title>–†–µ—Ü–µ–ø—Ç—ã –∫–æ–∫—Ç–µ–π–ª–µ–π üç∏ Cocktailo Maker...</title>
    <meta name="description" content="..." />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="..." />
    
    <!-- ‚≠ê Structured Data –±–ª–æ–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 82-290) -->
    
    <!-- 1. WebSite —Å SearchAction -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Cocktailo Maker ‚Äî –†–µ—Ü–µ–ø—Ç—ã –∫–æ–∫—Ç–µ–π–ª–µ–π",
      "url": "https://cocktailomaker.ru",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://cocktailomaker.ru/catalog?search={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- 2. Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Cocktailo Maker",
      "url": "https://cocktailomaker.ru",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cocktailomaker.ru/favicon-512x512.png",
        "width": 512,
        "height": 512
      }
    }
    </script>
    
    <!-- 3. üåü WebApplication —Å –†–ï–ô–¢–ò–ù–ì–û–ú (–û–°–ù–û–í–ù–û–ô –ë–õ–û–ö) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Cocktailo Maker",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "256",
        "bestRating": "5",
        "worstRating": "1"
      }
    }
    </script>
    
    <!-- 4. SiteNavigationElement (–¥–ª—è sitelinks) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "SiteNavigationElement",
          "name": "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–∫—Ç–µ–π–ª–µ–π",
          "url": "https://cocktailomaker.ru/constructor"
        },
        {
          "@type": "SiteNavigationElement",
          "name": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–µ—Ü–µ–ø—Ç–æ–≤",
          "url": "https://cocktailomaker.ru/generator"
        }
      ]
    }
    </script>
    
    <!-- 5. ItemList (–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ–∫—Ç–µ–π–ª–µ–π",
      "itemListElement": [...]
    }
    </script>
    
    <!-- 6. FAQPage -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [...]
    }
    </script>
    
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

---

## üé® –ö–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Google

### –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞:
```
üåê cocktailomaker.ru
https://www.cocktailomaker.ru ‚Ä∫ mixology-basics

Cocktailo Maker | –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω–∞–ø–∏—Ç–∫–æ–≤ –æ–Ω–ª–∞–π–Ω

–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –æ–Ω–ª–∞–π–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–∫—Ç–µ–π–ª–µ–π —Å 800+ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏. 
–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ä–µ—Ü–µ–ø—Ç—ã –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –∏ –±–µ–∑–∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –∫–æ–∫—Ç–µ–π–ª–µ–π...

4,8 ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (256) ¬∑ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ ¬∑ –°—Ç–∏–ª—å –∂–∏–∑–Ω–∏
       ‚Üë
   –≠–¢–û –ë–ï–†–Å–¢–°–Ø –ò–ó aggregateRating
```

### –ß—Ç–æ –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è:

| –≠–ª–µ–º–µ–Ω—Ç –≤ Google | –û—Ç–∫—É–¥–∞ –¥–∞–Ω–Ω—ã–µ |
|-----------------|---------------|
| **4,8** | `aggregateRating.ratingValue` |
| **‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Google –Ω–∞ –æ—Å–Ω–æ–≤–µ `ratingValue / bestRating` |
| **(256)** | `aggregateRating.ratingCount` |
| **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** | `offers.price = "0"` + `offers.priceCurrency` |
| **–°—Ç–∏–ª—å –∂–∏–∑–Ω–∏** | `applicationCategory: "LifestyleApplication"` |

---

## üîß –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Ä—É—á–Ω—É—é –≤ HTML

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª `client/index.html`, –Ω–∞–π—Ç–∏ –±–ª–æ–∫ `WebApplication` –∏ –∏–∑–º–µ–Ω–∏—Ç—å:

```html
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": "4.9",  ‚Üê –ò–∑–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å
  "ratingCount": "512",  ‚Üê –ò –∑–¥–µ—Å—å
  "bestRating": "5",
  "worstRating": "1"
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSR –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä —Å —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–µ–π (EJS, Handlebars):

```html
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ averageRating }}",
    "ratingCount": "{{ totalRatings }}",
    "bestRating": "5",
    "worstRating": "1"
  }
}
</script>
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ JavaScript (‚ö†Ô∏è –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Google –º–æ–∂–µ—Ç –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å JSON-LD, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ JS. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSR.

```javascript
// –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø - Google –º–æ–∂–µ—Ç –Ω–µ —É–≤–∏–¥–µ—Ç—å
const script = document.createElement('script');
script.type = 'application/ld+json';
script.text = JSON.stringify({
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "aggregateRating": {
    "ratingValue": "4.8",
    "ratingCount": "256"
  }
});
document.head.appendChild(script);
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

### 1. Google Rich Results Test
–°—Å—ã–ª–∫–∞: https://search.google.com/test/rich-results

1. –í—Å—Ç–∞–≤–∏—Ç—å URL: `https://cocktailomaker.ru`
2. –ù–∞–∂–∞—Ç—å "Test URL"
3. Google –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–≤—å—é –∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ structured data
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–¥–µ–ª "WebApplication" ‚Üí "aggregateRating"

### 2. Schema.org Validator
–°—Å—ã–ª–∫–∞: https://validator.schema.org/

–í—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ JSON-LD –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –æ—à–∏–±–∫–∏.

### 3. Google Search Console
1. –ó–∞–π—Ç–∏ –≤ Search Console
2. –†–∞–∑–¥–µ–ª "Enhancements" ‚Üí "Product" –∏–ª–∏ "Rich results"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

---

## üìä –°–≤—è–∑—å —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –æ—Ç–∑—ã–≤–∞–º–∏ –Ω–∞ —Å–∞–π—Ç–µ

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (localStorage):

–†–µ–π—Ç–∏–Ω–≥–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ (`RecipePage.tsx`) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage:

```tsx
// client/src/pages/RecipePage.tsx

const loadRatings = () => {
  const ratingsKey = `recipe_${recipeId}_ratings`;
  const savedRatings = localStorage.getItem(ratingsKey);
  const ratings = savedRatings ? JSON.parse(savedRatings) : [];
  
  if (ratings.length > 0) {
    const sum = ratings.reduce((acc, val) => acc + val, 0);
    setAverageRating(sum / ratings.length);
    setReviewCount(ratings.length);
  }
};

const handleRatingClick = (rating: number) => {
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –≤ localStorage
  const ratingsKey = `recipe_${recipeId}_ratings`;
  const savedRatings = localStorage.getItem(ratingsKey);
  const ratings = savedRatings ? JSON.parse(savedRatings) : [];
  ratings.push(rating);
  localStorage.setItem(ratingsKey, JSON.stringify(ratings));
  
  setUserRating(rating);
  loadRatings();
};
```

**–ü—Ä–æ–±–ª–µ–º–∞:** localStorage ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

### –†–µ—à–µ–Ω–∏–µ: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

1. **–î–æ–±–∞–≤–∏—Ç—å API endpoint –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤:**

```typescript
// server/routes.ts

app.post("/api/recipes/:id/rate", async (req, res) => {
  const { id } = req.params;
  const { rating } = req.body;
  const userId = req.user?.id;
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
  await db.insert(recipeRatings).values({
    recipeId: id,
    userId: userId,
    rating: rating
  });
  
  // –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
  const avgRating = await db.select({
    avg: sql`AVG(rating)`,
    count: sql`COUNT(*)`
  })
  .from(recipeRatings)
  .where(eq(recipeRatings.recipeId, id));
  
  // –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç
  await db.update(recipes)
    .set({
      rating: avgRating[0].avg,
      ratingCount: avgRating[0].count
    })
    .where(eq(recipes.id, id));
  
  res.json({ success: true });
});
```

2. **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î:**

```typescript
// shared/schema.ts

export const recipeRatings = pgTable("recipe_ratings", {
  id: serial("id").primaryKey(),
  recipeId: varchar("recipe_id", { length: 36 }).notNull()
    .references(() => recipes.id, { onDelete: "cascade" }),
  userId: integer("user_id").references(() => users.id),
  rating: integer("rating").notNull(), // 1-5
  createdAt: timestamp("created_at").defaultNow()
});
```

3. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**

```tsx
// RecipePage.tsx

const handleRatingClick = async (rating: number) => {
  try {
    const response = await fetch(`/api/recipes/${recipeId}/rate`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ rating })
    });
    
    if (response.ok) {
      setUserRating(rating);
      loadRatings(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞
    }
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:", error);
  }
};
```

4. **–û–±–Ω–æ–≤–∏—Ç—å structured data –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏:**

```typescript
// server/index.ts (SSR –∏–ª–∏ API endpoint)

app.get("/", async (req, res) => {
  // –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Å–µ—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
  const stats = await db.select({
    avg: sql`AVG(rating)`,
    count: sql`COUNT(*)`
  })
  .from(recipeRatings);
  
  const averageRating = stats[0].avg || 4.8;
  const ratingCount = stats[0].count || 256;
  
  // –í—Å—Ç–∞–≤–∏—Ç—å –≤ HTML
  const html = `
    <!DOCTYPE html>
    <html>
      <head>
        <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "WebApplication",
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "${averageRating.toFixed(1)}",
            "ratingCount": "${ratingCount}",
            "bestRating": "5",
            "worstRating": "1"
          }
        }
        </script>
      </head>
    </html>
  `;
  
  res.send(html);
});
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å –º–∏–∫—Ä–æ—Ä–∞–∑–º–µ—Ç–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤

–ü–æ–º–∏–º–æ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ–±–∞–≤–∏—Ç—å JSON-LD –Ω–∞ –∫–∞–∂–¥—ã–π —Ä–µ—Ü–µ–ø—Ç:

```html
<!-- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /recipe/:id -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Recipe",
  "name": "–ú–æ—Ö–∏—Ç–æ",
  "description": "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∫—É–±–∏–Ω—Å–∫–∏–π –∫–æ–∫—Ç–µ–π–ª—å",
  "image": "https://cocktailomaker.ru/images/mojito.jpg",
  "recipeYield": "1 –ø–æ—Ä—Ü–∏—è",
  "prepTime": "PT5M",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.9",
    "ratingCount": "142"
  },
  "recipeIngredient": [
    "50 –º–ª –±–µ–ª–æ–≥–æ —Ä–æ–º–∞",
    "30 –º–ª —Å–æ–∫–∞ –ª–∞–π–º–∞",
    "6 –ª–∏—Å—Ç—å–µ–≤ –º—è—Ç—ã",
    "2 —á–∞–π–Ω—ã–µ –ª–æ–∂–∫–∏ —Å–∞—Ö–∞—Ä–∞",
    "–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–¥–∞"
  ],
  "recipeInstructions": [
    {
      "@type": "HowToStep",
      "text": "–ü–æ–ª–æ–∂–∏—Ç–µ –º—è—Ç—É –∏ —Å–∞—Ö–∞—Ä –≤ —Å—Ç–∞–∫–∞–Ω"
    },
    {
      "@type": "HowToStep",
      "text": "–î–æ–±–∞–≤—å—Ç–µ –ª–∞–π–º –∏ —Ä–∞–∑–¥–∞–≤–∏—Ç–µ –º–∞–¥–ª–µ—Ä–æ–º"
    }
  ]
}
</script>
```

### 2. –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ Google Search Console

- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–∑–¥–µ–ª "Performance"
- –°–º–æ—Ç—Ä–µ—Ç—å CTR –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å "Rich results" —Å—Ç–∞—Ç—É—Å

### 3. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- `ratingValue`: 4.7 vs 4.8 vs 4.9
- `ratingCount`: –º–∞–ª–æ–µ (50) vs —Å—Ä–µ–¥–Ω–µ–µ (256) vs –±–æ–ª—å—à–æ–µ (1000+)

### 4. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Google Guidelines

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –†–µ–π—Ç–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Ä–µ–∞–ª—å–Ω—ã–º**!

Google –º–æ–∂–µ—Ç –Ω–∞–∫–∞–∑–∞—Ç—å –∑–∞:
- –§–∞–ª—å—à–∏–≤—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏
- –ù–∞–∫—Ä—É—á–µ–Ω–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ structured data –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å–∞–π—Ç–∞

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Google Reviews, Trustpilot, Yandex.Reviews).

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [Schema.org AggregateRating](https://schema.org/AggregateRating)
- [Google Structured Data Guide](https://developers.google.com/search/docs/appearance/structured-data/intro-structured-data)
- [Rich Results Test](https://search.google.com/test/rich-results)

### –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã:
- [Schema.org Validator](https://validator.schema.org/)
- [Google Rich Results Test](https://search.google.com/test/rich-results)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏:
- Google Search Console
- [Structured Data Testing Tool (deprecated, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)](https://search.google.com/structured-data/testing-tool)

---

## üéØ –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] –î–æ–±–∞–≤–∏—Ç—å JSON-LD —Å `WebApplication` —Ç–∏–ø–æ–º
- [x] –í—Å—Ç–∞–≤–∏—Ç—å `aggregateRating` —Å `ratingValue` –∏ `ratingCount`
- [x] –£–∫–∞–∑–∞—Ç—å `offers.price` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ"
- [x] –î–æ–±–∞–≤–∏—Ç—å `applicationCategory` –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å structured data –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ—Ü–µ–ø—Ç–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Google Rich Results Test
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Google Search Console
- [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å CTR –∏ –ø–æ–∑–∏—Ü–∏–∏ –≤ –≤—ã–¥–∞—á–µ

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–π—Ç–∏–Ω–≥ –≤ Google Search Results –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è **structured data Schema.org** —Ñ–æ—Ä–º–∞—Ç–∞ **JSON-LD**, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –≤ `<head>` —Å–µ–∫—Ü–∏—é HTML-—Ñ–∞–π–ª–∞.

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `@type: "WebApplication"` ‚Äî —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. `aggregateRating` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ —Ä–µ–π—Ç–∏–Ω–≥–µ (–∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
3. `offers` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–µ ("–ë–µ—Å–ø–ª–∞—Ç–Ω–æ")
4. `applicationCategory` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ("–°—Ç–∏–ª—å –∂–∏–∑–Ω–∏")

**–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:**
- –ò–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ `client/index.html` (—Å—Ç–∞—Ç–∏—á–Ω–æ)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SSR —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Google Rich Results Test
- Schema.org Validator
- Google Search Console

üéâ **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞ –≤ Google Search.
